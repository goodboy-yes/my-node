import{_ as e,o as a,c as s,e as i}from"./app-CtA61ec0.js";const n={},d=i(`<h1 id="git-rebase-i-交互式变基" tabindex="-1"><a class="header-anchor" href="#git-rebase-i-交互式变基"><span>git rebase -i 交互式变基</span></a></h1><p>Git 的交互式变基是其最强大、最灵活的命令之一，允许倒回历史并进行任何所需的更改。如果想要删除旧的提交、更改旧的提交消息或者将旧的提交压缩成其他的提交</p><h2 id="删除旧提交" tabindex="-1"><a class="header-anchor" href="#删除旧提交"><span>删除旧提交</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> rebase <span class="token parameter variable">-ir</span> <span class="token operator">&lt;</span>id<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>此命令将启动一个文本编辑器</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>pick id1 message1
pick id2 message2
pick id3 message3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>要删除 id1 对应的提交，需要将 pick 命令更改为 drop（或 d）并保持其他不变</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>drop id1 message1
pick id2 message2
pick id3 message3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>关闭并保存文件。在已删除提交之后的所有提交哈希都将被重新计算</p><h2 id="改写提交消息" tabindex="-1"><a class="header-anchor" href="#改写提交消息"><span>改写提交消息</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> rebase <span class="token parameter variable">-i</span> <span class="token operator">&lt;</span>id<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>只需将任何要更改其消息的提交的 pick 替换为 r（或 reword）</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>reword id1 message1
pick id2 message2
pick id3 message3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>关闭并保存文件，对于想要改写的每个提交，git 将打开编辑器，就像正在修改该提交一样，允许编辑消息</p><h2 id="编辑旧提交" tabindex="-1"><a class="header-anchor" href="#编辑旧提交"><span>编辑旧提交</span></a></h2><p>允许修改提交添加文件</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> rebase <span class="token parameter variable">-i</span> <span class="token operator">&lt;</span>id<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>将 pick 替换为 edit</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>edit id1 message1
pick id2 message2
pick id3 message3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>关闭并保存文件，应该从 git 中看到这条消息：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>Stopped at id1 message1
You can amend the commit now, with

        <span class="token function">git</span> commit <span class="token parameter variable">--amend</span>

Once you are satisfied with your changes, run

        <span class="token function">git</span> rebase <span class="token parameter variable">--continue</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行命令进行修改或添加文件：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> commit <span class="token parameter variable">--amend</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>需要继续 rebase：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> rebase <span class="token parameter variable">--continue</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="压缩" tabindex="-1"><a class="header-anchor" href="#压缩"><span>压缩</span></a></h2><p>压缩可以将 n 个提交合并为一个，使提交历史更加紧凑，这有时很有用。但是，如果将来需要，将无法恢复或修改旧的提交</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> rebase <span class="token parameter variable">-i</span> <span class="token operator">&lt;</span>id<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>我们会将最后两个提交压缩到第一个提交中，所以将它们的 pick 命令更改为 squash：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>pick id1 message1
squash  id2 message2
squash  id3 message3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>保存并退出，git 将打开编辑器，通知我们将要合并三个提交，保存并退出即可</p>`,31),l=[d];function t(r,c){return a(),s("div",null,l)}const o=e(n,[["render",t],["__file","git-rebase.html.vue"]]),v=JSON.parse('{"path":"/git/git-rebase.html","title":"git rebase -i 交互式变基","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"删除旧提交","slug":"删除旧提交","link":"#删除旧提交","children":[]},{"level":2,"title":"改写提交消息","slug":"改写提交消息","link":"#改写提交消息","children":[]},{"level":2,"title":"编辑旧提交","slug":"编辑旧提交","link":"#编辑旧提交","children":[]},{"level":2,"title":"压缩","slug":"压缩","link":"#压缩","children":[]}],"git":{"updatedTime":1708503944000,"contributors":[{"name":"guokc","email":"guokc@tsintergy.com","commits":1}]},"filePathRelative":"git/git-rebase.md"}');export{o as comp,v as data};
